<%- include('../partials/header.ejs', { title: "Home" }) %>
    <%- include('../partials/authNav.ejs') %>
        <div class="main-content">
            <h1>Welcome <%= username %>!
            </h1>
            <% if (successMessage) { %>
                <p class="success-message">
                    <%= successMessage %>
                </p>
                <% } %>
                    <h3>Active Polls</h3>
                    <ul id="polls">
                        <% polls.forEach((poll)=> { %>
                            <li class="poll-container" id="<%= poll.id %>">
                                <h2>
                                    <%= poll.question %>
                                </h2>
                                <ul class="poll-options">
                                    <% for (let {answer, votes } of poll.options) { %>
                                        <li id="<%= poll.id %>_<%= answer %>">
                                            <strong>
                                                <%= answer %>:
                                            </strong>
                                            <%= votes %> votes
                                        </li>
                                        <% } %>
                                </ul>

                                <form class="poll-form button-container">
                                    <% for (let { answer } of poll.options) { %>
                                        <button class="action-button vote-button" type="submit" value="<%= answer %>"
                                            name="poll-option">
                                            Vote for <%= answer %>
                                        </button>
                                        <% } %>
                                            <input type="text" style="display: none;" value="<%= poll.id %>"
                                                name="poll-id" />
                                </form>
                            </li>
                            <% }) %>
                    </ul>
                    <!-- Create Poll -->
                    <h3>Create New Poll</h3>
                    <form action="/createPoll">
                        <button type="submit">Create</button>
        </div>
        <script src="/frontend.js" type="application/javascript"></script>
        <%- include('../partials/footer.ejs') %>